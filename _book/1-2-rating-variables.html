<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="R for Loss Data Analytics" />
<meta property="og:type" content="book" />


<meta property="og:description" content="Loss Data Analytics is an interactive, online, freely available text. It provides core training on one of the foundations of actuarial science, loss data modeling." />
<meta name="github-repo" content="ewfreesLDARCode" />

<meta name="author" content="An open text authored by the Actuarial Community" />

<meta name="date" content="2018-04-24" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="Loss Data Analytics is an interactive, online, freely available text. It provides core training on one of the foundations of actuarial science, loss data modeling.">

<title>R for Loss Data Analytics</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="toc.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#preface">Preface</a></li>
<li class="has-sub"><a href="1-introduction-to-loss-data-analytics.html#introduction-to-loss-data-analytics"><span class="toc-section-number">1</span> Introduction to Loss Data Analytics</a><ul>
<li class="has-sub"><a href="1-1-case-study-wisconsin-property-fund.html#case-study-wisconsin-property-fund"><span class="toc-section-number">1.1</span> Case Study: Wisconsin Property Fund</a><ul>
<li><a href="1-1-case-study-wisconsin-property-fund.html#read-in-property-fund-data"><span class="toc-section-number">1.1.1</span> Read in Property Fund Data</a></li>
<li><a href="1-1-case-study-wisconsin-property-fund.html#claim-frequency-distribution"><span class="toc-section-number">1.1.2</span> Claim Frequency Distribution</a></li>
<li><a href="1-1-case-study-wisconsin-property-fund.html#average-severity-distribution-for-2010"><span class="toc-section-number">1.1.3</span> Average Severity Distribution for 2010</a></li>
<li><a href="1-1-case-study-wisconsin-property-fund.html#plot-of-average-claims"><span class="toc-section-number">1.1.4</span> Plot of average claims</a></li>
</ul></li>
<li class="has-sub"><a href="1-2-rating-variables.html#rating-variables"><span class="toc-section-number">1.2</span> Rating Variables</a><ul>
<li><a href="1-2-rating-variables.html#average-claims-over-time"><span class="toc-section-number">1.2.1</span> Average claims over time</a></li>
<li><a href="1-2-rating-variables.html#frequency-and-claims-statistics-of-full-data"><span class="toc-section-number">1.2.2</span> Frequency and claims statistics of full data</a></li>
<li><a href="1-2-rating-variables.html#rating-variable-description"><span class="toc-section-number">1.2.3</span> Rating variable description</a></li>
<li><a href="1-2-rating-variables.html#frequency-and-claims-by-rating-variables"><span class="toc-section-number">1.2.4</span> Frequency and claims by rating variables</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="2-frequency-distributions.html#frequency-distributions"><span class="toc-section-number">2</span> Frequency Distributions</a><ul>
<li class="has-sub"><a href="2-1-basic-distributions.html#basic-distributions"><span class="toc-section-number">2.1</span> Basic Distributions</a><ul>
<li><a href="2-1-basic-distributions.html#poisson-distribution"><span class="toc-section-number">2.1.1</span> Poisson Distribution</a></li>
<li><a href="2-1-basic-distributions.html#negative-binomial-distribution"><span class="toc-section-number">2.1.2</span> Negative Binomial Distribution</a></li>
<li><a href="2-1-basic-distributions.html#binomial-distribution"><span class="toc-section-number">2.1.3</span> Binomial Distribution</a></li>
</ul></li>
<li><a href="2-2-ab0-class-of-distributions.html#ab0-class-of-distributions"><span class="toc-section-number">2.2</span> (<em>a</em>,<em>b</em>,0) Class of Distributions</a></li>
<li class="has-sub"><a href="2-3-estimating-frequency-distributions.html#estimating-frequency-distributions"><span class="toc-section-number">2.3</span> Estimating Frequency Distributions</a><ul>
<li><a href="2-3-estimating-frequency-distributions.html#singapore-data"><span class="toc-section-number">2.3.1</span> Singapore Data</a></li>
<li><a href="2-3-estimating-frequency-distributions.html#claim-frequency-distribution-1"><span class="toc-section-number">2.3.2</span> Claim frequency distribution</a></li>
<li><a href="2-3-estimating-frequency-distributions.html#visualize-the-loglikelihood-function"><span class="toc-section-number">2.3.3</span> Visualize the Loglikelihood function</a></li>
<li><a href="2-3-estimating-frequency-distributions.html#the-maximum-likelihood-estimate-of-poisson-distribution"><span class="toc-section-number">2.3.4</span> The maximum likelihood estimate of Poisson distribution</a></li>
<li><a href="2-3-estimating-frequency-distributions.html#the-maximum-likelihood-estimate-of-the-negative-binomial-distribution"><span class="toc-section-number">2.3.5</span> The maximum likelihood estimate of the Negative Binomial distribution</a></li>
</ul></li>
<li class="has-sub"><a href="2-4-goodness-of-fit.html#goodness-of-fit"><span class="toc-section-number">2.4</span> Goodness of Fit</a><ul>
<li><a href="2-4-goodness-of-fit.html#pearson-goodness-of-fit-statistic"><span class="toc-section-number">2.4.1</span> Pearson goodness-of-fit statistic</a></li>
<li><a href="2-4-goodness-of-fit.html#negative-binomial-goodness-of-fit-statistic"><span class="toc-section-number">2.4.2</span> Negative binomial goodness-of-fit statistic</a></li>
</ul></li>
<li><a href="2-5-singapore-data-1.html#singapore-data-1"><span class="toc-section-number">2.5</span> Singapore Data</a></li>
<li class="has-sub"><a href="2-6-goodness-of-fit-for-poisson-distribution.html#goodness-of-fit-for-poisson-distribution"><span class="toc-section-number">2.6</span> Goodness of fit for Poisson distribution</a><ul>
<li><a href="2-6-goodness-of-fit-for-poisson-distribution.html#claim-frequency-distribution-2"><span class="toc-section-number">2.6.1</span> Claim frequency distribution</a></li>
<li><a href="2-6-goodness-of-fit-for-poisson-distribution.html#the-maximum-likelihood-estimate-of-lambda"><span class="toc-section-number">2.6.2</span> The maximum likelihood estimate of <span class="math inline">\(\lambda\)</span></a></li>
<li><a href="2-6-goodness-of-fit-for-poisson-distribution.html#pearson-goodness-of-fit-statistic-1"><span class="toc-section-number">2.6.3</span> Pearson goodness-of-fit statistic</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="3-modeling-loss-severities.html#modeling-loss-severities"><span class="toc-section-number">3</span> Modeling Loss Severities</a><ul>
<li><a href="3-1-required-packages.html#required-packages"><span class="toc-section-number">3.1</span> Required packages</a></li>
<li class="has-sub"><a href="3-2-gamma-distribution.html#gamma-distribution"><span class="toc-section-number">3.2</span> Gamma Distribution</a><ul>
<li><a href="3-2-gamma-distribution.html#varying-the-shape-parameter"><span class="toc-section-number">3.2.1</span> Varying the shape parameter</a></li>
<li><a href="3-2-gamma-distribution.html#varying-the-scale-parameter"><span class="toc-section-number">3.2.2</span> Varying the scale parameter</a></li>
</ul></li>
<li class="has-sub"><a href="3-3-pareto-distribution.html#pareto-distribution"><span class="toc-section-number">3.3</span> Pareto Distribution</a><ul>
<li><a href="3-3-pareto-distribution.html#varying-the-shape-parameter-1"><span class="toc-section-number">3.3.1</span> Varying the shape parameter</a></li>
<li><a href="3-3-pareto-distribution.html#varying-the-scale-parameter-1"><span class="toc-section-number">3.3.2</span> Varying the scale parameter</a></li>
</ul></li>
<li class="has-sub"><a href="3-4-weibull-distribution.html#weibull-distribution"><span class="toc-section-number">3.4</span> Weibull Distribution</a><ul>
<li><a href="3-4-weibull-distribution.html#varying-the-shape-parameter-2"><span class="toc-section-number">3.4.1</span> Varying the shape parameter</a></li>
<li><a href="3-4-weibull-distribution.html#varying-the-scale-parameter-2"><span class="toc-section-number">3.4.2</span> Varying the scale parameter</a></li>
</ul></li>
<li class="has-sub"><a href="3-5-the-generalized-beta-distribution-of-the-second-kind-gb2.html#the-generalized-beta-distribution-of-the-second-kind-gb2"><span class="toc-section-number">3.5</span> The Generalized Beta Distribution of the Second Kind (GB2)</a><ul>
<li><a href="3-5-the-generalized-beta-distribution-of-the-second-kind-gb2.html#varying-the-scale-parameter-3"><span class="toc-section-number">3.5.1</span> Varying the scale parameter</a></li>
</ul></li>
<li class="has-sub"><a href="3-6-methods-of-creating-new-distributions.html#methods-of-creating-new-distributions"><span class="toc-section-number">3.6</span> Methods of creating new distributions</a><ul>
<li><a href="3-6-methods-of-creating-new-distributions.html#mixture-distributions"><span class="toc-section-number">3.6.1</span> Mixture distributions</a></li>
<li><a href="3-6-methods-of-creating-new-distributions.html#density-obtained-through-splicing"><span class="toc-section-number">3.6.2</span> Density obtained through splicing</a></li>
</ul></li>
<li class="has-sub"><a href="3-7-coverage-modifications.html#coverage-modifications"><span class="toc-section-number">3.7</span> Coverage Modifications</a><ul>
<li><a href="3-7-coverage-modifications.html#load-required-package"><span class="toc-section-number">3.7.1</span> Load required package</a></li>
<li><a href="3-7-coverage-modifications.html#ordinary-deductible"><span class="toc-section-number">3.7.2</span> Ordinary deductible</a></li>
<li><a href="3-7-coverage-modifications.html#franchise-deductible"><span class="toc-section-number">3.7.3</span> Franchise deductible</a></li>
</ul></li>
<li class="has-sub"><a href="3-8-mle-for-grouped-data.html#mle-for-grouped-data"><span class="toc-section-number">3.8</span> MLE for grouped data</a><ul>
<li><a href="3-8-mle-for-grouped-data.html#mle-for-grouped-data--soa-exam-c-276"><span class="toc-section-number">3.8.1</span> MLE for grouped data- SOA Exam C # 276</a></li>
</ul></li>
<li class="has-sub"><a href="3-9-nonparametric-inference.html#nonparametric-inference"><span class="toc-section-number">3.9</span> Nonparametric Inference</a><ul>
<li><a href="3-9-nonparametric-inference.html#nonparametric-estimation-tools"><span class="toc-section-number">3.9.1</span> Nonparametric Estimation Tools</a></li>
<li><a href="3-9-nonparametric-inference.html#property-fund-data"><span class="toc-section-number">3.9.2</span> Property Fund Data</a></li>
<li><a href="3-9-nonparametric-inference.html#nonparametric-estimation-tools-for-model-selection"><span class="toc-section-number">3.9.3</span> Nonparametric Estimation Tools For Model Selection</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="4-model-selection.html#model-selection"><span class="toc-section-number">4</span> Model Selection</a><ul>
<li class="has-sub"><a href="4-1-claim-level-data-of-property-fund.html#claim-level-data-of-property-fund"><span class="toc-section-number">4.1</span> Claim level data of Property Fund</a><ul>
<li><a href="4-1-claim-level-data-of-property-fund.html#claims-data"><span class="toc-section-number">4.1.1</span> Claims data</a></li>
<li><a href="4-1-claim-level-data-of-property-fund.html#summary-of-claims"><span class="toc-section-number">4.1.2</span> Summary of claims</a></li>
<li><a href="4-1-claim-level-data-of-property-fund.html#plot-of-claims"><span class="toc-section-number">4.1.3</span> Plot of claims</a></li>
</ul></li>
<li class="has-sub"><a href="4-2-fitting-distributions.html#fitting-distributions"><span class="toc-section-number">4.2</span> Fitting distributions</a><ul>
<li><a href="4-2-fitting-distributions.html#inference-assuming-a-lognormal-distribution"><span class="toc-section-number">4.2.1</span> Inference assuming a lognormal distribution</a></li>
<li><a href="4-2-fitting-distributions.html#inference-assuming-a-gamma-distribution"><span class="toc-section-number">4.2.2</span> Inference assuming a gamma distribution</a></li>
<li><a href="4-2-fitting-distributions.html#inference-assuming-a-pareto-distribution"><span class="toc-section-number">4.2.3</span> Inference assuming a Pareto Distribution</a></li>
<li><a href="4-2-fitting-distributions.html#inference-assuming-an-exponential-distribution"><span class="toc-section-number">4.2.4</span> Inference assuming an exponential distribution</a></li>
<li><a href="4-2-fitting-distributions.html#inference-assuming-an-exponential-distribution-1"><span class="toc-section-number">4.2.5</span> Inference assuming an exponential distribution</a></li>
</ul></li>
<li><a href="4-3-plotting-the-fit-using-densities-on-a-logarithmic-scale.html#plotting-the-fit-using-densities-on-a-logarithmic-scale"><span class="toc-section-number">4.3</span> Plotting the fit using densities (on a logarithmic scale)</a></li>
</ul></li>
<li class="has-sub"><a href="5-simulation.html#simulation"><span class="toc-section-number">5</span> Simulation</a><ul>
<li><a href="5-1-simulation-inversion-method.html#simulation---inversion-method"><span class="toc-section-number">5.1</span> Simulation - Inversion method</a></li>
<li><a href="5-2-comparing-moments-from-the-simulated-data-to-theoretical-moments.html#comparing-moments-from-the-simulated-data-to-theoretical-moments"><span class="toc-section-number">5.2</span> Comparing moments from the simulated data to theoretical moments</a></li>
</ul></li>
<li class="has-sub"><a href="6-aggregate-claim-simulation.html#aggregate-claim-simulation"><span class="toc-section-number">6</span> Aggregate Claim Simulation</a><ul>
<li class="has-sub"><a href="6-1-collective-risk-model-without-coverage-modifications.html#collective-risk-model-without-coverage-modifications"><span class="toc-section-number">6.1</span> Collective Risk Model: without coverage modifications</a><ul>
<li><a href="6-1-collective-risk-model-without-coverage-modifications.html#set-parameters"><span class="toc-section-number">6.1.1</span> Set Parameters</a></li>
<li><a href="6-1-collective-risk-model-without-coverage-modifications.html#show-frequency-and-severity-distributions"><span class="toc-section-number">6.1.2</span> Show frequency and severity distributions</a></li>
<li><a href="6-1-collective-risk-model-without-coverage-modifications.html#set-sample-size-for-the-simulation"><span class="toc-section-number">6.1.3</span> Set sample size for the simulation</a></li>
<li><a href="6-1-collective-risk-model-without-coverage-modifications.html#show-distribution-of-aggregate-loss-s"><span class="toc-section-number">6.1.4</span> Show distribution of aggregate loss S</a></li>
</ul></li>
<li class="has-sub"><a href="6-2-applications.html#applications"><span class="toc-section-number">6.2</span> Applications</a><ul>
<li><a href="6-2-applications.html#find-descriptive-statistics"><span class="toc-section-number">6.2.1</span> Find descriptive statistics</a></li>
<li><a href="6-2-applications.html#calculate-cdf"><span class="toc-section-number">6.2.2</span> Calculate cdf</a></li>
<li><a href="6-2-applications.html#calculate-risk-measures"><span class="toc-section-number">6.2.3</span> Calculate risk measures</a></li>
<li><a href="6-2-applications.html#pricing-stop-loss-insurance---set-deductible"><span class="toc-section-number">6.2.4</span> Pricing stop-loss insurance - Set deductible</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="7-freqsev.html#freqsev"><span class="toc-section-number">7</span> FreqSev</a><ul>
<li class="has-sub"><a href="7-1-getting-the-data.html#getting-the-data"><span class="toc-section-number">7.1</span> Getting the Data</a><ul>
<li><a href="7-1-getting-the-data.html#read-data-massauto.csv"><span class="toc-section-number">7.1.1</span> read data “MassAuto.csv”</a></li>
<li><a href="7-1-getting-the-data.html#check-variable-names"><span class="toc-section-number">7.1.2</span> Check Variable Names</a></li>
<li><a href="7-1-getting-the-data.html#calculate-total-losses-in-dat"><span class="toc-section-number">7.1.3</span> Calculate Total Losses in “dat”</a></li>
</ul></li>
<li class="has-sub"><a href="7-2-fit-frequency-models.html#fit-frequency-models"><span class="toc-section-number">7.2</span> Fit Frequency Models</a><ul>
<li><a href="7-2-fit-frequency-models.html#prepare-data-for-frequency-models"><span class="toc-section-number">7.2.1</span> Prepare Data for Frequency Models</a></li>
<li><a href="7-2-fit-frequency-models.html#fit-poisson-distribution"><span class="toc-section-number">7.2.2</span> Fit Poisson distribution</a></li>
<li><a href="7-2-fit-frequency-models.html#fit-negative-binomial-distribution"><span class="toc-section-number">7.2.3</span> Fit Negative Binomial Distribution</a></li>
<li><a href="7-2-fit-frequency-models.html#goodness-of-fit-1"><span class="toc-section-number">7.2.4</span> Goodness-of-Fit</a></li>
<li><a href="7-2-fit-frequency-models.html#chi-square-statistics"><span class="toc-section-number">7.2.5</span> Chi Square Statistics</a></li>
</ul></li>
<li class="has-sub"><a href="7-3-fit-severity-models.html#fit-severity-models"><span class="toc-section-number">7.3</span> Fit Severity Models</a><ul>
<li><a href="7-3-fit-severity-models.html#prepare-data-for-severity-models"><span class="toc-section-number">7.3.1</span> Prepare Data for Severity Models</a></li>
<li><a href="7-3-fit-severity-models.html#log-normal-distribution"><span class="toc-section-number">7.3.2</span> Log-normal distribution</a></li>
<li><a href="7-3-fit-severity-models.html#pareto-distribution-1"><span class="toc-section-number">7.3.3</span> Pareto Distribution</a></li>
<li><a href="7-3-fit-severity-models.html#histogram"><span class="toc-section-number">7.3.4</span> Histogram</a></li>
<li><a href="7-3-fit-severity-models.html#qq-plots"><span class="toc-section-number">7.3.5</span> qq Plots</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="8-tweedie.html#tweedie"><span class="toc-section-number">8</span> Tweedie</a><ul>
<li class="has-sub"><a href="8-1-tweedie-distribution.html#tweedie-distribution"><span class="toc-section-number">8.1</span> Tweedie distribution</a><ul>
<li><a href="8-1-tweedie-distribution.html#load-tweedie-package"><span class="toc-section-number">8.1.1</span> Load Tweedie Package</a></li>
<li><a href="8-1-tweedie-distribution.html#set-paramteres-for-tweediepmuphi"><span class="toc-section-number">8.1.2</span> Set Paramteres for Tweedie(p,mu,phi)</a></li>
<li><a href="8-1-tweedie-distribution.html#set-sample-size"><span class="toc-section-number">8.1.3</span> Set Sample Size</a></li>
<li><a href="8-1-tweedie-distribution.html#show-summary-statistics"><span class="toc-section-number">8.1.4</span> Show Summary Statistics</a></li>
<li><a href="8-1-tweedie-distribution.html#show-histogram"><span class="toc-section-number">8.1.5</span> Show Histogram</a></li>
<li><a href="8-1-tweedie-distribution.html#qq-plots-for-different-p-values"><span class="toc-section-number">8.1.6</span> QQ Plots for Different p Values</a></li>
<li><a href="8-1-tweedie-distribution.html#fit-tweedie-distribution"><span class="toc-section-number">8.1.7</span> Fit Tweedie Distribution</a></li>
<li><a href="8-1-tweedie-distribution.html#show-parameter-estimates"><span class="toc-section-number">8.1.8</span> Show Parameter Estimates</a></li>
<li><a href="8-1-tweedie-distribution.html#maximum-likelihood-estimation"><span class="toc-section-number">8.1.9</span> Maximum Likelihood Estimation</a></li>
<li><a href="8-1-tweedie-distribution.html#obtain-standard-error-4"><span class="toc-section-number">8.1.10</span> Obtain Standard Error</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="9-bootstrap-estimation.html#bootstrap-estimation"><span class="toc-section-number">9</span> Bootstrap Estimation</a><ul>
<li class="has-sub"><a href="9-1-empirical-bootstrap.html#empirical-bootstrap"><span class="toc-section-number">9.1</span> Empirical Bootstrap</a><ul>
<li><a href="9-1-empirical-bootstrap.html#random-sample"><span class="toc-section-number">9.1.1</span> Random sample</a></li>
<li><a href="9-1-empirical-bootstrap.html#sample-mean"><span class="toc-section-number">9.1.2</span> Sample mean</a></li>
<li><a href="9-1-empirical-bootstrap.html#random-resamples-from-y"><span class="toc-section-number">9.1.3</span> Random resamples from y</a></li>
<li><a href="9-1-empirical-bootstrap.html#confidence-interval"><span class="toc-section-number">9.1.4</span> 90% confidence interval</a></li>
</ul></li>
<li class="has-sub"><a href="9-2-parametric-bootstrap.html#parametric-bootstrap"><span class="toc-section-number">9.2</span> Parametric Bootstrap</a><ul>
<li><a href="9-2-parametric-bootstrap.html#random-sample-of-size-250"><span class="toc-section-number">9.2.1</span> random sample of size 250</a></li>
<li><a href="9-2-parametric-bootstrap.html#the-mle-for-lambda-1xbar"><span class="toc-section-number">9.2.2</span> The MLE for lambda: 1/xbar</a></li>
<li><a href="9-2-parametric-bootstrap.html#generate-bootstrap-samples"><span class="toc-section-number">9.2.3</span> Generate bootstrap samples</a></li>
<li><a href="9-2-parametric-bootstrap.html#compute-botstrap-statistics"><span class="toc-section-number">9.2.4</span> compute botstrap statistics</a></li>
<li><a href="9-2-parametric-bootstrap.html#calculate-deviation-from-sample-statistics"><span class="toc-section-number">9.2.5</span> calculate deviation from sample statistics</a></li>
<li><a href="9-2-parametric-bootstrap.html#confidence-intervel"><span class="toc-section-number">9.2.6</span> 90% confidence intervel</a></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="rating-variables" class="section level2 tabset">
<h2><span class="header-section-number">1.2</span> Rating Variables</h2>
<p>Earlier we considered a sample of 1,110 observations which may seem like a lot. However, as we will seen in our forthcoming applications, because of the preponderance of zeros and the skewed nature of claims, actuaries typically yearn for more data. One common approach that we adopt here is to examine outcomes from multiple years, thus increasing the sample size.</p>
<p>Table 1.4 shows that the average claim varies over time.</p>
<div id="average-claims-over-time" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Average claims over time</h3>
<p>Table 1.4</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(doBy)
T1A &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(Freq <span class="op">~</span><span class="st"> </span>Year, <span class="dt">data =</span> Insample,   
                 <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">m =</span> <span class="kw">mean</span>(x), <span class="dt">num=</span><span class="kw">length</span>(x)) } )
T1B &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(yAvg    <span class="op">~</span><span class="st"> </span>Year, <span class="dt">data =</span> Insample,   
                 <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">m =</span> <span class="kw">mean</span>(x), <span class="dt">num=</span><span class="kw">length</span>(x)) } )
T1C &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(BCcov    <span class="op">~</span><span class="st"> </span>Year, <span class="dt">data =</span> Insample,   
                 <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">m =</span> <span class="kw">mean</span>(x), <span class="dt">num=</span><span class="kw">length</span>(x)) } )
Table1In &lt;-<span class="st"> </span><span class="kw">cbind</span>(T1A[<span class="dv">1</span>],T1A[<span class="dv">2</span>],T1B[<span class="dv">2</span>],T1C[<span class="dv">2</span>],T1A[<span class="dv">3</span>])
<span class="kw">names</span>(Table1In) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Average Freq&quot;</span>,<span class="st">&quot;Average Sev&quot;</span>, <span class="st">&quot;Average Coverage&quot;</span>,<span class="st">&quot;No. of Policyholders&quot;</span>)
<span class="kw">pander</span>(Table1In)</code></pre></div>
<table>
<colgroup>
<col width="9%" />
<col width="19%" />
<col width="18%" />
<col width="24%" />
<col width="28%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Year</th>
<th align="center">Average Freq</th>
<th align="center">Average Sev</th>
<th align="center">Average Coverage</th>
<th align="center">No. of Policyholders</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">2006</td>
<td align="center">0.9515</td>
<td align="center">9695</td>
<td align="center">32498186</td>
<td align="center">1154</td>
</tr>
<tr class="even">
<td align="center">2007</td>
<td align="center">1.167</td>
<td align="center">6544</td>
<td align="center">35275949</td>
<td align="center">1138</td>
</tr>
<tr class="odd">
<td align="center">2008</td>
<td align="center">0.9742</td>
<td align="center">5311</td>
<td align="center">37267485</td>
<td align="center">1125</td>
</tr>
<tr class="even">
<td align="center">2009</td>
<td align="center">1.219</td>
<td align="center">4572</td>
<td align="center">40355382</td>
<td align="center">1112</td>
</tr>
<tr class="odd">
<td align="center">2010</td>
<td align="center">1.241</td>
<td align="center">20452</td>
<td align="center">41242070</td>
<td align="center">1110</td>
</tr>
</tbody>
</table>
<p>A few quick notes on these commands:</p>
<ul>
<li><p>The <code>summaryBy()</code> function provides summary statistics of a variable across different groups. You need to install the <code>doBy</code> package to use the command.</p></li>
<li><p>The <code>cbind()</code> combines vector, matrix or data frame by columns. The row number of the two datasets must be equal.</p></li>
<li><p>The <code>c()</code> function combines its arguments to form a vector.</p></li>
</ul>
<p>For a different look at this five-year sample, Table 1.5 summarizes the distribution of our two outcomes, frequency and claims amount. In each case, the average exceeds the median, suggesting that the distributions are right-skewed.</p>
</div>
<div id="frequency-and-claims-statistics-of-full-data" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Frequency and claims statistics of full data</h3>
<p>Table 1.5</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">BCcov.div1000 &lt;-<span class="st"> </span>(Insample<span class="op">$</span>BCcov)<span class="op">/</span><span class="dv">1000</span>

t1&lt;-<span class="st"> </span><span class="kw">summaryBy</span>(Freq <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> Insample,
               <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">ma=</span><span class="kw">min</span>(x), <span class="dt">m1=</span><span class="kw">median</span>(x),<span class="dt">m=</span><span class="kw">mean</span>(x),<span class="dt">mb=</span><span class="kw">max</span>(x)) } )
<span class="kw">names</span>(t1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Minimum&quot;</span>, <span class="st">&quot;Median&quot;</span>,<span class="st">&quot;Average&quot;</span>, <span class="st">&quot;Maximum&quot;</span>)
t2 &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(yAvg <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> Insample, 
                <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">ma=</span><span class="kw">min</span>(x), <span class="dt">m1=</span><span class="kw">median</span>(x), <span class="dt">m=</span><span class="kw">mean</span>(x),<span class="dt">mb=</span><span class="kw">max</span>(x)) } )
<span class="kw">names</span>(t2) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Minimum&quot;</span>, <span class="st">&quot;Median&quot;</span>,<span class="st">&quot;Average&quot;</span>, <span class="st">&quot;Maximum&quot;</span>)
t3 &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(Deduct <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> Insample, 
                <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">ma=</span><span class="kw">min</span>(x), <span class="dt">m1=</span><span class="kw">median</span>(x), <span class="dt">m=</span><span class="kw">mean</span>(x),<span class="dt">mb=</span><span class="kw">max</span>(x)) } )
<span class="kw">names</span>(t3) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Minimum&quot;</span>, <span class="st">&quot;Median&quot;</span>,<span class="st">&quot;Average&quot;</span>, <span class="st">&quot;Maximum&quot;</span>)
t4 &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(BCcov.div1000 <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> Insample, 
                <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">ma=</span><span class="kw">min</span>(x), <span class="dt">m1=</span><span class="kw">median</span>(x), <span class="dt">m=</span><span class="kw">mean</span>(x),<span class="dt">mb=</span><span class="kw">max</span>(x)) } )
<span class="kw">names</span>(t4) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Minimum&quot;</span>, <span class="st">&quot;Median&quot;</span>,<span class="st">&quot;Average&quot;</span>, <span class="st">&quot;Maximum&quot;</span>)
Table2 &lt;-<span class="st"> </span><span class="kw">rbind</span>(t1,t2,t3,t4)
Table2a &lt;-<span class="st"> </span><span class="kw">round</span>(Table2,<span class="dv">3</span>)
Rowlable &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="st">&quot;Claim Frequency&quot;</span>,<span class="st">&quot;Claim Severity&quot;</span>,<span class="st">&quot;Deductible&quot;</span>,<span class="st">&quot;Coverage (000&#39;s)&quot;</span>)
Table2aa &lt;-<span class="st"> </span><span class="kw">cbind</span>(Rowlable,<span class="kw">as.matrix</span>(Table2a))
<span class="kw">pander</span>(Table2aa)</code></pre></div>
<table style="width:92%;">
<colgroup>
<col width="26%" />
<col width="13%" />
<col width="16%" />
<col width="16%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Minimum</th>
<th align="center">Median</th>
<th align="center">Average</th>
<th align="center">Maximum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Claim Frequency</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1.109</td>
<td align="center">263</td>
</tr>
<tr class="even">
<td align="center">Claim Severity</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">9291.565</td>
<td align="center">12922217.84</td>
</tr>
<tr class="odd">
<td align="center">Deductible</td>
<td align="center">500</td>
<td align="center">1000</td>
<td align="center">3364.87</td>
<td align="center">1e+05</td>
</tr>
<tr class="even">
<td align="center">Coverage (000’s)</td>
<td align="center">8.937</td>
<td align="center">11353.566</td>
<td align="center">37280.855</td>
<td align="center">2444796.98</td>
</tr>
</tbody>
</table>
<p>A few quick notes on these commands:</p>
<ul>
<li><p>The <code>rbind()</code> combines vector, matrix or data frame by rows. The column of the two datasets must be same.</p></li>
<li><p>The <code>round()</code> function rounds the values in its first argument to the specified number of decimal places (default 0).</p></li>
</ul>
<p>Table 1.6 describes the rating variables considered in this chapter. To handle the skewness, we henceforth focus on logarithmic transformations of coverage and deductibles. To get a sense of the relationship between the non-continuous rating variables and claims, Table 1.7 relates the claims outcomes to these categorical variables.</p>
</div>
<div id="rating-variable-description" class="section level3">
<h3><span class="header-section-number">1.2.3</span> Rating variable description</h3>
<p>See table 1.6 below for variables and variable description.</p>
<p>Table 1.6</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">des &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">text=</span><span class="st">&#39;</span>
<span class="st"> Variable Description</span>
<span class="st">  &quot;BCcov&quot;  &quot;Total building and content coverage in dollars&quot;</span>
<span class="st">  &quot;Deduct&quot;  &quot;Deductible in dollars&quot;</span>
<span class="st">&quot;Entity Type&quot;   &quot;Categorical variable that is one of six types: (Village, City, County, Misc, School, or Town)&quot;</span>
<span class="st">&quot;AlarmCredit&quot;   &quot;Categorical variable that is one of four types: (0%, 5%, 10%, or 15%), for automatic smoke alarms in main rooms&quot;</span>
<span class="st">&quot;NoClaimCredit&quot; &quot;Binary variable to indicate no claims in the past two years&quot;</span>
<span class="st">&quot;Fire5&quot; &quot;Binary variable to indicate the fire class is below 5. (The range of fire class is 0~10)&quot; &#39;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pander</span>(des)</code></pre></div>
<table style="width:67%;">
<colgroup>
<col width="22%" />
<col width="44%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Variable</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">BCcov</td>
<td align="center">Total building and content coverage in dollars</td>
</tr>
<tr class="even">
<td align="center">Deduct</td>
<td align="center">Deductible in dollars</td>
</tr>
<tr class="odd">
<td align="center">Entity Type</td>
<td align="center">Categorical variable that is one of six types: (Village, City, County, Misc, School, or Town)</td>
</tr>
<tr class="even">
<td align="center">AlarmCredit</td>
<td align="center">Categorical variable that is one of four types: (0%, 5%, 10%, or 15%), for automatic smoke alarms in main rooms</td>
</tr>
<tr class="odd">
<td align="center">NoClaimCredit</td>
<td align="center">Binary variable to indicate no claims in the past two years</td>
</tr>
<tr class="even">
<td align="center">Fire5</td>
<td align="center">Binary variable to indicate the fire class is below 5. (The range of fire class is 0~10)</td>
</tr>
</tbody>
</table>
</div>
<div id="frequency-and-claims-by-rating-variables" class="section level3">
<h3><span class="header-section-number">1.2.4</span> Frequency and claims by rating variables</h3>
<p>Table 1.7 shows claims summary by Entity Type, Fire Class, and No Claim Credit.</p>
<p>Table 1.7:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Table 1.7</span>
ByVarSumm&lt;-<span class="cf">function</span>(datasub){
  tempA &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(Freq    <span class="op">~</span><span class="st"> </span><span class="dv">1</span> , <span class="dt">data =</span> datasub,   
                     <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">m =</span> <span class="kw">mean</span>(x), <span class="dt">num=</span><span class="kw">length</span>(x)) } )
  datasub1&lt;-<span class="st">  </span><span class="kw">subset</span>(datasub, yAvg<span class="op">&gt;</span><span class="dv">0</span>)
  tempB &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(yAvg   <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> datasub1,
                     <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">m =</span> <span class="kw">mean</span>(x)) } )
  tempC &lt;-<span class="st"> </span><span class="kw">merge</span>(tempA,tempB,<span class="dt">all.x=</span>T)[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>)]
  tempC1 &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(tempC)
  <span class="kw">return</span>(tempC1)
}

datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeVillage <span class="op">==</span><span class="st"> </span><span class="dv">1</span>);   
t1 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeCity <span class="op">==</span><span class="st"> </span><span class="dv">1</span>);      
t2 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeCounty <span class="op">==</span><span class="st"> </span><span class="dv">1</span>);   
t3 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeMisc <span class="op">==</span><span class="st"> </span><span class="dv">1</span>);      
t4 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeSchool <span class="op">==</span><span class="st"> </span><span class="dv">1</span>);    
t5 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeTown <span class="op">==</span><span class="st"> </span><span class="dv">1</span>);      
t6 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, Fire5 <span class="op">==</span><span class="st"> </span><span class="dv">0</span>);                      
t7 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, Fire5 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>);                      
t8 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, Insample<span class="op">$</span>NoClaimCredit <span class="op">==</span><span class="st"> </span><span class="dv">0</span>);
t9 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, Insample<span class="op">$</span>NoClaimCredit <span class="op">==</span><span class="st"> </span><span class="dv">1</span>);
t10 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
t11 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(Insample)

Tablea &lt;-<span class="st"> </span><span class="kw">rbind</span>(t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,t11)
Tableaa &lt;-<span class="st"> </span><span class="kw">round</span>(Tablea,<span class="dv">3</span>)
Rowlable &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="st">&quot;Village&quot;</span>,<span class="st">&quot;City&quot;</span>,<span class="st">&quot;County&quot;</span>,<span class="st">&quot;Misc&quot;</span>,<span class="st">&quot;School&quot;</span>,
                  <span class="st">&quot;Town&quot;</span>,<span class="st">&quot;Fire5--No&quot;</span>,<span class="st">&quot;Fire5--Yes&quot;</span>,<span class="st">&quot;NoClaimCredit--No&quot;</span>,
                  <span class="st">&quot;NoClaimCredit--Yes&quot;</span>,<span class="st">&quot;Total&quot;</span>)
Table4 &lt;-<span class="st"> </span><span class="kw">cbind</span>(Rowlable,<span class="kw">as.matrix</span>(Tableaa))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pander</span>(Table4)</code></pre></div>
<table style="width:72%;">
<colgroup>
<col width="29%" />
<col width="15%" />
<col width="12%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Freq.num</th>
<th align="center">Freq.m</th>
<th align="center">yAvg.m</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Village</td>
<td align="center">1341</td>
<td align="center">0.452</td>
<td align="center">10645.206</td>
</tr>
<tr class="even">
<td align="center">City</td>
<td align="center">793</td>
<td align="center">1.941</td>
<td align="center">16924.035</td>
</tr>
<tr class="odd">
<td align="center">County</td>
<td align="center">328</td>
<td align="center">4.899</td>
<td align="center">15453.206</td>
</tr>
<tr class="even">
<td align="center">Misc</td>
<td align="center">609</td>
<td align="center">0.186</td>
<td align="center">43036.076</td>
</tr>
<tr class="odd">
<td align="center">School</td>
<td align="center">1597</td>
<td align="center">1.434</td>
<td align="center">64346.394</td>
</tr>
<tr class="even">
<td align="center">Town</td>
<td align="center">971</td>
<td align="center">0.103</td>
<td align="center">19831.048</td>
</tr>
<tr class="odd">
<td align="center">Fire5–No</td>
<td align="center">2508</td>
<td align="center">0.502</td>
<td align="center">13935.421</td>
</tr>
<tr class="even">
<td align="center">Fire5–Yes</td>
<td align="center">3131</td>
<td align="center">1.596</td>
<td align="center">41421.263</td>
</tr>
<tr class="odd">
<td align="center">NoClaimCredit–No</td>
<td align="center">3786</td>
<td align="center">1.501</td>
<td align="center">31365.085</td>
</tr>
<tr class="even">
<td align="center">NoClaimCredit–Yes</td>
<td align="center">1853</td>
<td align="center">0.31</td>
<td align="center">30498.714</td>
</tr>
<tr class="odd">
<td align="center">Total</td>
<td align="center">5639</td>
<td align="center">1.109</td>
<td align="center">31206.155</td>
</tr>
</tbody>
</table>
<p>Table 1.8 shows claims summary by Entity Type and Alarm Credit</p>
<p>Table 1.8:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ByVarSumm&lt;-<span class="cf">function</span>(datasub){
  tempA &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(Freq    <span class="op">~</span><span class="st"> </span>AC00 , <span class="dt">data =</span> datasub,   
                     <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">m =</span> <span class="kw">mean</span>(x), <span class="dt">num=</span><span class="kw">length</span>(x)) } )
  datasub1 &lt;-<span class="st">  </span><span class="kw">subset</span>(datasub, yAvg<span class="op">&gt;</span><span class="dv">0</span>)
  <span class="cf">if</span>(<span class="kw">nrow</span>(datasub1)<span class="op">==</span><span class="dv">0</span>) { n&lt;-<span class="kw">nrow</span>(datasub)
    <span class="kw">return</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,n))
  } <span class="cf">else</span> 
  {
    tempB &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(yAvg   <span class="op">~</span><span class="st"> </span>AC00, <span class="dt">data =</span> datasub1,
                       <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">c</span>(<span class="dt">m =</span> <span class="kw">mean</span>(x)) } )
    tempC &lt;-<span class="st"> </span><span class="kw">merge</span>(tempA,tempB,<span class="dt">all.x=</span>T)[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">3</span>)]
    tempC1 &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(tempC)
    <span class="kw">return</span>(tempC1)
  }
}
AlarmC &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">*</span>(Insample<span class="op">$</span>AC00<span class="op">==</span><span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>(Insample<span class="op">$</span>AC05<span class="op">==</span><span class="dv">1</span>)<span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>(Insample<span class="op">$</span>AC10<span class="op">==</span><span class="dv">1</span>)<span class="op">+</span><span class="st"> </span><span class="dv">4</span><span class="op">*</span>(Insample<span class="op">$</span>AC15<span class="op">==</span><span class="dv">1</span>)
ByVarCredit&lt;-<span class="cf">function</span>(ACnum){
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeVillage <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>AlarmC <span class="op">==</span><span class="st"> </span>ACnum); 
  t1 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeCity <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>AlarmC <span class="op">==</span><span class="st"> </span>ACnum);      
  t2 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeCounty <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>AlarmC <span class="op">==</span><span class="st"> </span>ACnum);   
  t3 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeMisc <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>AlarmC <span class="op">==</span><span class="st"> </span>ACnum);
  t4 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeSchool <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>AlarmC <span class="op">==</span><span class="st"> </span>ACnum);    
  t5 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, TypeTown <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>AlarmC <span class="op">==</span>ACnum);      
  t6 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
datasub &lt;-<span class="st">  </span><span class="kw">subset</span>(Insample, AlarmC <span class="op">==</span><span class="st"> </span>ACnum);  
  t7 &lt;-<span class="st"> </span><span class="kw">ByVarSumm</span>(datasub)
Tablea &lt;-<span class="st"> </span><span class="kw">rbind</span>(t1,t2,t3,t4,t5,t6,t7)
Tableaa &lt;-<span class="st"> </span><span class="kw">round</span>(Tablea,<span class="dv">3</span>)
Rowlable &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="st">&quot;Village&quot;</span>,<span class="st">&quot;City&quot;</span>,<span class="st">&quot;County&quot;</span>,<span class="st">&quot;Misc&quot;</span>,<span class="st">&quot;School&quot;</span>,
                  <span class="st">&quot;Town&quot;</span>,<span class="st">&quot;Total&quot;</span>)
Table4 &lt;-<span class="st"> </span><span class="kw">cbind</span>(Rowlable,<span class="kw">as.matrix</span>(Tableaa))
}
Table4a &lt;-<span class="st"> </span><span class="kw">ByVarCredit</span>(<span class="dv">1</span>)    <span class="co">#Claims Summary by Entity Type and Alarm Credit==00</span>
Table4b &lt;-<span class="st"> </span><span class="kw">ByVarCredit</span>(<span class="dv">2</span>)    <span class="co">#Claims Summary by Entity Type and Alarm Credit==05 </span>
Table4c &lt;-<span class="st"> </span><span class="kw">ByVarCredit</span>(<span class="dv">3</span>)    <span class="co">#Claims Summary by Entity Type and Alarm Credit==10</span>
Table4d &lt;-<span class="st"> </span><span class="kw">ByVarCredit</span>(<span class="dv">4</span>)    <span class="co">#Claims Summary by Entity Type and Alarm Credit==15</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pander</span>(Table4a) <span class="co">#Claims Summary by Entity Type and Alarm Credit==00</span></code></pre></div>
<table style="width:60%;">
<colgroup>
<col width="13%" />
<col width="12%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Freq.m</th>
<th align="center">yAvg.m</th>
<th align="center">Freq.num</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Village</td>
<td align="center">0.326</td>
<td align="center">11077.997</td>
<td align="center">829</td>
</tr>
<tr class="even">
<td align="center">City</td>
<td align="center">0.893</td>
<td align="center">7575.979</td>
<td align="center">244</td>
</tr>
<tr class="odd">
<td align="center">County</td>
<td align="center">2.14</td>
<td align="center">16012.719</td>
<td align="center">50</td>
</tr>
<tr class="even">
<td align="center">Misc</td>
<td align="center">0.117</td>
<td align="center">15122.127</td>
<td align="center">386</td>
</tr>
<tr class="odd">
<td align="center">School</td>
<td align="center">0.422</td>
<td align="center">25522.708</td>
<td align="center">294</td>
</tr>
<tr class="even">
<td align="center">Town</td>
<td align="center">0.083</td>
<td align="center">25257.084</td>
<td align="center">808</td>
</tr>
<tr class="odd">
<td align="center">Total</td>
<td align="center">0.318</td>
<td align="center">15118.491</td>
<td align="center">2611</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pander</span>(Table4b) <span class="co">#Claims Summary by Entity Type and Alarm Credit==05 </span></code></pre></div>
<table style="width:72%;">
<colgroup>
<col width="12%" />
<col width="13%" />
<col width="12%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center"> </th>
<th align="center">Freq.m</th>
<th align="center">yAvg.m</th>
<th align="center">Freq.num</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"></td>
<td align="center">Village</td>
<td align="center">0.278</td>
<td align="center">8086.057</td>
<td align="center">54</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center">City</td>
<td align="center">2.077</td>
<td align="center">4150.125</td>
<td align="center">13</td>
</tr>
<tr class="odd">
<td align="center"><strong>t3</strong></td>
<td align="center">County</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center">Misc</td>
<td align="center">0.278</td>
<td align="center">13063.933</td>
<td align="center">18</td>
</tr>
<tr class="odd">
<td align="center"></td>
<td align="center">School</td>
<td align="center">0.41</td>
<td align="center">14575.003</td>
<td align="center">122</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="center">Town</td>
<td align="center">0.194</td>
<td align="center">3937.29</td>
<td align="center">31</td>
</tr>
<tr class="odd">
<td align="center"></td>
<td align="center">Total</td>
<td align="center">0.431</td>
<td align="center">10762.112</td>
<td align="center">239</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pander</span>(Table4c) <span class="co">#Claims Summary by Entity Type and Alarm Credit==10</span></code></pre></div>
<table style="width:60%;">
<colgroup>
<col width="13%" />
<col width="12%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Freq.m</th>
<th align="center">yAvg.m</th>
<th align="center">Freq.num</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Village</td>
<td align="center">0.5</td>
<td align="center">8792.376</td>
<td align="center">50</td>
</tr>
<tr class="even">
<td align="center">City</td>
<td align="center">1.258</td>
<td align="center">8625.169</td>
<td align="center">31</td>
</tr>
<tr class="odd">
<td align="center">County</td>
<td align="center">2.125</td>
<td align="center">11687.969</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">Misc</td>
<td align="center">0.077</td>
<td align="center">3923.375</td>
<td align="center">26</td>
</tr>
<tr class="odd">
<td align="center">School</td>
<td align="center">0.488</td>
<td align="center">11596.912</td>
<td align="center">168</td>
</tr>
<tr class="even">
<td align="center">Town</td>
<td align="center">0.091</td>
<td align="center">2338.06</td>
<td align="center">44</td>
</tr>
<tr class="odd">
<td align="center">Total</td>
<td align="center">0.517</td>
<td align="center">10194.094</td>
<td align="center">327</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pander</span>(Table4d) <span class="co">#Claims Summary by Entity Type and Alarm Credit==15</span></code></pre></div>
<table style="width:60%;">
<colgroup>
<col width="13%" />
<col width="12%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Freq.m</th>
<th align="center">yAvg.m</th>
<th align="center">Freq.num</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Village</td>
<td align="center">0.725</td>
<td align="center">10543.752</td>
<td align="center">408</td>
</tr>
<tr class="even">
<td align="center">City</td>
<td align="center">2.485</td>
<td align="center">20469.514</td>
<td align="center">505</td>
</tr>
<tr class="odd">
<td align="center">County</td>
<td align="center">5.513</td>
<td align="center">15475.74</td>
<td align="center">269</td>
</tr>
<tr class="even">
<td align="center">Misc</td>
<td align="center">0.341</td>
<td align="center">87020.878</td>
<td align="center">179</td>
</tr>
<tr class="odd">
<td align="center">School</td>
<td align="center">2.008</td>
<td align="center">85139.974</td>
<td align="center">1013</td>
</tr>
<tr class="even">
<td align="center">Town</td>
<td align="center">0.261</td>
<td align="center">9489.613</td>
<td align="center">88</td>
</tr>
<tr class="odd">
<td align="center">Total</td>
<td align="center">2.093</td>
<td align="center">41458.312</td>
<td align="center">2462</td>
</tr>
</tbody>
</table>

</div>
</div>
<!-- </div> -->
<p style="text-align: center;">
<a href="1-1-case-study-wisconsin-property-fund.html"><button class="btn btn-default">Previous</button></a>
<a href="2-frequency-distributions.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
<!-- </html> -->
